/*!
 * Dropzone 6.0.0-beta.2
 * https://www.dropzone.dev/
 * (c) 2012, Matias Meno
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Dropzone=t()}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=u(e);if(t){var r=u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){r(t,e);var i=s(t);function t(){return e(this,t),i.apply(this,arguments)}return i(t,[{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=0,o=this.listeners[e]||[];r<o.length;r++)(0,o[r]).apply(this,i);return this}},{key:"on",value:function(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),this}},{key:"once",value:function(e,t){var i=this;return this.on(e,function n(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];t.apply(i,o),i.off(e,n)})}},{key:"off",value:function(e,t){if(this.listeners[e]){if(t){var i=this.listeners[e].indexOf(t);return i>=0&&this.listeners[e].splice(i,1),this}delete this.listeners[e]}return this}},{key:"listeners",get:function(){return this._listeners=this._listeners||{}},set:function(e){this._listeners=e}}]),t}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});var h={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!0,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:document.body,capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"kB",b:"b"},init:function(){},params:function(e,t,i){},accept:function(e,t){return t()},fallback:function(){var e=this;this.element.className="".concat(this.element.className," dz-browser-not-supported");for(var t=0,i=this.element.getElementsByTagName("div");t<i.length;t++){var n=i[t];if(/(^| )dz-message($| )/.test(n.className)){n.className="dz-message";break}}var r=this.element.querySelector(".dz-message");r&&(r.innerHTML=this.options.dictFallbackMessage);var o=this.element.querySelector("form");if(o){o.setAttribute("enctype","multipart/form-data"),o.setAttribute("method",this.options.method);var s=o.querySelector("input[type=submit]");s&&s.setAttribute("value",this.options.dictFallbackText)}},resize:function(e,t,i,n){var r={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;r.optWidth=t,r.optHeight=i;var s=null!=t&&null!=i?t/i:null;return null==t&&null==i?(r.trgWidth=r.srcWidth,r.trgHeight=r.srcHeight):null==t?r.trgWidth=(r.trgHeight=i)*o:null==i?r.trgHeight=(r.trgWidth=t)/o:n===h.CROP?(o>s?(r.srcHeight=e.height,r.srcWidth=r.srcHeight*s):(r.srcWidth=e.width,r.srcHeight=r.srcWidth/s),r.srcX=(e.width-r.srcWidth)/2,r.srcY=(e.height-r.srcHeight)/2,r.trgWidth=t,r.trgHeight=i):n===h.CONTAIN&&(s>o?(r.trgWidth=t,r.trgHeight=t/o):(r.trgWidth=i*o,r.trgHeight=i)),r},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress">\n    <span class="dz-upload" data-dz-uploadprogress></span>\n  </div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){if(e.target===this.element)return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){e.previewElement=h.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var i=0,n=e.previewElement.querySelectorAll("[data-dz-name]");i<n.length;i++)n[i].textContent=e.name;for(var r=0,o=e.previewElement.querySelectorAll("[data-dz-size]");r<o.length;r++)(s=o[r]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=h.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));for(var s,a=function(i){return i.preventDefault(),i.stopPropagation(),e.status===h.UPLOADING?h.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?h.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)},l=0,u=e.previewElement.querySelectorAll("[data-dz-remove]");l<u.length;l++)u[l].addEventListener("click",a)}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var i=0,n=e.previewElement.querySelectorAll("[data-dz-thumbnail]");i<n.length;i++)n[i].alt=e.name,n[i].src=t;return e.previewElement.classList.add("dz-image-preview")}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);for(var i=0,n=e.previewElement.querySelectorAll("[data-dz-errormessage]");i<n.length;i++)n[i].textContent=t}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,i){if(e.previewElement)for(var n=0,r=e.previewElement.querySelectorAll("[data-dz-uploadprogress]");n<r.length;n++)r[n].style.width="".concat(t,"%")},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};h.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},h.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},h.getElement=function(e,t){var i;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType?i=e:null!=e.jquery||null!=e.length?null!=(i=e[0])&&(i=i):null!=(i=e)&&"object"==typeof i&&i.context&&i.length&&(i=i[0]),null==i)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return i},h.getElements=function(e,t){var i,n;if(e instanceof Array){n=[];try{for(var r=0,o=e;r<o.length;r++){var s=o[r];n.push(this.getElement(s,t))}}catch(e){n=null}}else if("string"==typeof e){n=[];for(var a=0,l=document.querySelectorAll(e);a<l.length;a++){var u=l[a];n.push(u)}}else null!=e.nodeType?n=[e]:null!=e.jquery||null!=e.length?n=e:null!=(i=e)&&"object"==typeof i&&i.context&&i.length&&(n=e);if(null==n||!n.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return n},h.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},h.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var i=0,n=t;i<n.length;i++){var r=n[i].trim();if("."===r.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(e.type.match(new RegExp(r.replace(/\/\*/,"\/.*"))))return!0}else if(e.type===r)return!0}return!1},h.ADDED="added",h.QUEUED="queued",h.ACCEPTED=h.QUEUED,h.UPLOADING="uploading",h.PROCESSING=h.UPLOADING,h.CANCELED="canceled",h.ERROR="error",h.SUCCESS="success",h.CROP="crop",h.CONTAIN="contain",h.options={},h.optionsForElement=function(e){return e.getAttribute("id")?h.options[camelize(e.getAttribute("id"))]:{}},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new h(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=h:window.Dropzone=h,h.ADDED="added",h.QUEUED="queued",h.ACCEPTED=h.QUEUED,h.UPLOADING="uploading",h.PROCESSING=h.UPLOADING,h.CANCELED="canceled",h.ERROR="error",h.SUCCESS="success";var d=function(t){r(o,t);var n=s(o);function o(t,r){var s;e(this,o),s=n.call(this);var a,l,u,c=l(s);return c.element=t,c.version=h.version,c.clickableElements=[],c.listeners=[],c.files=[],s="string"==typeof c.element?document.querySelector(c.element):c.element,s?(c.element.dropzone&&c.element.dropzone.destroy(),c.element.dropzone=l(c),a=null!=(l=h.optionsForElement(c.element))?l:{},c.options=i({},h,a,null!=r?r:{}),c.options.previewsContainer=h.getElement(c.options.previewsContainer,"previewsContainer"),c.options.clickable&&(!0===c.options.clickable?c.clickableElements=[c.element]:c.clickableElements=h.getElements(c.options.clickable,"clickable")),c.init(),c):new Error("Invalid dropzone element."))}return i(o,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(o.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(o.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(o.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===o.UPLOADING||e.status===o.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),"DIV"===this.element.tagName&&this.element.setAttribute("tabindex",0),this.element.classList.add("dropzone"),this.rejectDuplicates=this.options.rejectDuplicates,this.previewsContainer=this.options.previewsContainer||this.element,this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",null!==this.options.acceptedFiles&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),null!==this.options.capture&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex",-1),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",(this.options.hiddenInputContainer||document.body).appendChild(this.hiddenFileInput),this.options.url)this.url=this.options.url;else if(this.element.hasAttribute("action"))this.url=this.element.getAttribute("action");else throw new Error("Dropzone element must have either data-url attribute or action on the form.");for(var t=function(t){return t.preventDefault(),t.stopPropagation(),e.element.classList.contains("dz-clickable")&&e.fileInputClick()},i=0,r=this.clickableElements;i<r.length;i++)r[i].addEventListener("click",t);this.URL=window.URL||window.webkitURL;for(var s=0,a=this.events;s<a.length;s++){var l=a[s];this.on(l,this.options[l])}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)}),this.hiddenFileInput.addEventListener("change",function(){var t=e.hiddenFileInput.files;if(t.length)for(var i=0,n=t;i<n.length;i++){var r=n[i];e.addFile(r)}return e.hiddenFileInput.value="",e.hiddenFileInput.files=null}),this.element.addEventListener("drop",function(t){return e.drop(t)}),this.element.addEventListener("dragstart",function(t){return e.dragstart(t)}),this.element.addEventListener("dragend",function(t){return e.dragend(t)}),this.element.addEventListener("dragenter",function(t){return e.dragenter(t)}),this.element.addEventListener("dragover",function(t){return e.dragover(t)}),this.element.addEventListener("dragleave",function(t){return e.dragleave(t)}),this.element.addEventListener("paste",function(t){return e.paste(t)}),this.element.addEventListener("focus",function(){return e.element.classList.add("dz-focused")}),this.element.addEventListener("blur",function(){return e.element.classList.remove("dz-focused")}),this.element.addEventListener("keydown",function(t){32===t.keyCode&&(t.preventDefault(),e.fileInputClick())}),this.element.setAttribute("aria-label","file dropzone"),this.nativeDropSupported=function(){var e=!1;return"draggable"in document.createElement("div")&&(e=!/(Mobile|Android|Silk\/|Kindle|BlackBerry|Opera Mini|Opera Mobi)/.test(navigator.userAgent)),e}(),this.options.fallback&&!this.nativeDropSupported)return this.options.fallback.call(this);if(!this.options.url)throw new Error("No URL provided.");this.options.method&&(this.options.method=this.options.method.toUpperCase()),this.emit("init")}},{key:"destroy",value:function(){return this.element.dropzone=null,this.element.removeEventListener("click",this.clickableElements)}},{key:"updateTotalUploadProgress",value:function(){var e,t=0,i=0;if(this.getActiveFiles().length){for(var n=0,r=this.getActiveFiles();n<r.length;n++){var o=r[n];t+=o.upload.bytesSent,i+=o.upload.total}e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}},{key:"fileInputClick",value:function(){if(this.hiddenFileInput)return this.hiddenFileInput.click()}},{key:"addFile",value:function(e){return e.upload={uuid:o.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this.options.renameFilename?this.options.renameFilename.call(this,e.name):e.name},this.files.push(e),e.status=o.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return t?(e.accepted=!1,this._errorProcessing([e],t)):(e.accepted=!0,this.options.autoQueue&&this.enqueueFile(e)),this._updateMaxFilesReachedClass()}.bind(this))}},{key:"enqueueFiles",value:function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.enqueueFile(n)}return null}},{key:"enqueueFile",value:function(e){if(e.status!==o.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=o.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return this.processQueue()}.bind(this),0)}},{key:"_enqueueThumbnail",value:function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(e),setTimeout(function(){return this._processThumbnailQueue()}.bind(this),0)}},{key:"_processThumbnailQueue",value:function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var e=this._thumbnailQueue.shift();return this.createThumbnail(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(t){return this.emit("thumbnail",e,t),this._processingThumbnail=!1,this._processThumbnailQueue()}.bind(this))}}},{key:"removeFile",value:function(e){if(e.status===o.UPLOADING&&this.cancelUpload(e),this.files=without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);for(var t=0,i=this.files.slice();t<i.length;t++){var n=i[t];(n.status!==o.UPLOADING||e)&&this.removeFile(n)}}},{key:"resizeImage",value:function(e,t,i,n,r){var o=this;return this.createThumbnail(e,t,i,n,!0,function(t,i){if(null==i)return r(e);var n=o.options.resizeMimeType;null==n&&(n=e.type);var s=i.toDataURL(n,o.options.resizeQuality);return"image/jpeg"===n||"image/jpg"===n?s=ExifRestore.restore(e,s):n=e.type,o._resizeURItoBlob(s,n,r)})}},{key:"_resizeURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0,o=t.length;r<o;r++)n[r]=t.charCodeAt(r);return new Blob([i],{type:e.split(",")[0].split(":")[1].split(";")[0]})}},{key:"createThumbnail",value:function(e,t,i,n,r,s){var a=this,l=new FileReader;l.onload=function(){e.dataURL=l.result,"image/svg+xml"===e.type?null!=s&&s(l.result):a.createThumbnailFromUrl(e,t,i,n,r,s)},l.readAsDataURL(e)}},{key:"displayExistingFile",value:function(e,t,i,n){var r=this,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",e),this.emit("complete",e),s){e.previewElement=o.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var a=0,l=e.previewElement.querySelectorAll("[data-dz-name]");a<l.length;a++)l[a].textContent=e.name;for(var u=0,c=e.previewElement.querySelectorAll("[data-dz-size]");u<c.length;u++)c[u].innerHTML=this.filesize(e.size)}this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,s,function(i){return r.emit("thumbnail",e,i),n&&n()},t),this.emit("addedfile",e),this.emit("complete",e)}},{key:"createThumbnailFromUrl",value:function(e,t,i,n,r,o,s){var a=this,l=document.createElement("img");return s&&(e.dataURL=s),l.onload=function(){var s=function(t){return t(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&r&&(s=function(e){return EXIF.getData(l,function(){return e(EXIF.getTag(l,"Orientation")||1)})}),s(function(r){e.width=l.naturalWidth,e.height=l.naturalHeight;var s=a.options.resize.call(a,e,t,i,n),u=document.createElement("canvas"),c=u.getContext("2d");switch(u.width=s.trgWidth,u.height=s.trgHeight,r>4&&(u.width=s.trgHeight,u.height=s.trgWidth),r){case 2:c.translate(u.width,0),c.scale(-1,1);break;case 3:c.translate(u.width,u.height),c.rotate(Math.PI);break;case 4:c.translate(0,u.height),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-u.height);break;case 7:c.rotate(.5*Math.PI),c.translate(u.width,-u.height),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-u.width,0)}drawImageIOSFix(c,l,null!=s.srcX?s.srcX:0,null!=s.srcY?s.srcY:0,s.srcWidth,s.srcHeight,null!=s.trgX?s.trgX:0,null!=s.trgY?s.trgY:0,s.trgWidth,s.trgHeight);var h=u.toDataURL("image/png");if(null!=o)return o(h,u)})},null!=s?l.src=s:l.src=e.dataURL,l}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,i=t>=e;if(!i){var n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-t));for(;t<e;){if(!n.length)break;this.processFile(n.shift()),t++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];n.processing=!0,n.status=o.UPLOADING,this.emit("processing",n)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===o.UPLOADING){for(var t=this._getFilesWithXhr(e.xhr),i=0,n=t;i<n.length;i++)n[i].status=o.CANCELED;for(var r=0,s=t;r<s.length;r++){var a=s[r];this.emit("canceled",a)}this.options.uploadMultiple&&this.emit("canceledmultiple",t),null!=e.xhr&&e.xhr.abort();for(var l=0,u=t;l<u.length;l++){var c=u[l];this.emit("complete",c)}}else(e.status===o.ADDED||e.status===o.QUEUED)&&(e.status=o.CANCELED,this.emit("canceled",e),this.emit("complete",e));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.apply(this,i)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,function(i){if(t.options.chunking){var r=i[0];r.upload.chunked=t.options.chunking&&(t.options.forceChunking||r.size>t.options.chunkSize),r.upload.totalChunkCount=Math.ceil(r.size/t.options.chunkSize)}if(i[0].upload.chunked){var s=i[0],a=s.upload.chunks=[],l=function(){for(var e=0;void 0===a[e];)e++;if(!(e>=s.upload.totalChunkCount)){var i=e*t.options.chunkSize,r=Math.min(i+t.options.chunkSize,s.size),l={name:t._getParamName(0),data:s.webkitSlice?s.webkitSlice(i,r):s.slice(i,r),filename:s.upload.filename,chunkIndex:e};a[e]={file:s,index:e,dataBlock:l,status:o.UPLOADING,progress:0,retries:0},t._uploadData(i,[l])}};if(s.upload.finishedChunkUpload=function(i,n){var r=!0;i.status=o.SUCCESS,i.dataBlock=null,i.xhr=null;for(var a=0;a<s.upload.totalChunkCount;a++){if(void 0===s.upload.chunks[a])return l();s.upload.chunks[a].status!==o.SUCCESS&&(r=!1)}r&&t.options.chunksUploaded(s,function(){t._finished(e,n,null)})},t.options.parallelChunkUploads)for(var u=0;u<s.upload.totalChunkCount;u++)l();else l()}else{for(var c=[],h=0;h<i.length;h++){var d={name:t._getParamName(h),data:i[h],filename:i[h].upload.filename,chunkIndex:0};c.push(d)}t._uploadData(e,c)}})}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"");}},{key:"_uploadData",value:function(e,t){var i,n=this,r=new XMLHttpRequest;for(var s=0,a=e;s<a.length;s++)a[s].xhr=r;e.length>1&&(i=e);var l=r;l.open(this.options.method,this.options.url,!0),l.timeout=this.options.timeout,l.withCredentials=!!this.options.withCredentials,l.onload=function(t){n._finishedUploading(e,r,t)},l.ontimeout=function(){n._handleUploadError(e,r,"Request timedout after ".concat(n.options.timeout/1e3," seconds"))},l.onerror=function(){n._handleUploadError(e,r)},null!=(progress=l.upload||l)&&(progress.onprogress=function(t){return n._updateFilesUploadProgress(e,r,t)});var u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var c in this.options.headers&&o.extend(u,this.options.headers),u)null!=u[c]&&l.setRequestHeader(c,u[c]);var h,d=new FormData;if(this.options.params)for(var p in h=this.options.params)"function"==typeof h[p]?d.append(p,h[p].call(this,e,r,i?{chunk:t[0].chunkIndex}:null)):d.append(p,h[p]);var f=this.resolveOption;for(var m=0,g=e;m<g.length;m++){var v=g[m];this.emit("sending",v,r,d)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,r,d),this.emit("totaluploadprogress",0,this.files.map(function(e){return e.upload.total}).reduce(function(e,t){return e+t},0),0);try{return l.send(this._getFormData(d,t))}catch(t){return this._handleUploadError(e,r,t)}}},{key:"_transformFiles",value:function(e,t){for(var i=this,n=[],r=0,o=0;o<e.length;o++)!function(t){i.options.transformFile.call(i,e[t],function(i){n[t]=i,++r===e.length&&t(n)})}(o)}},{key:"_getFormData",value:function(e,t){for(var i=0,n=t;i<n.length;i++){var r=n[i];e.append(r.name,r.data,r.filename)}return e}},{key:"_updateFilesUploadProgress",value:function(e,t,i){var n;if(void 0!==i){if(n=100*i.loaded/i.total,e[0].upload.chunked){var r=e[0],o=this._getChunk(r,t);o.progress=n,o.total=i.total,o.bytesSent=i.loaded,r.upload.progress=0,r.upload.total=0,r.upload.bytesSent=0;for(var s=0;s<r.upload.totalChunkCount;s++)void 0!==r.upload.chunks[s]&&(r.upload.progress+=r.upload.chunks[s].progress,r.upload.total+=r.upload.chunks[s].total,r.upload.bytesSent+=r.upload.chunks[s].bytesSent);r.upload.progress=r.upload.progress/r.upload.totalChunkCount,this.emit("uploadprogress",r,r.upload.progress,r.upload.bytesSent)}else for(var a=0,l=e;a<l.length;a++){var u=l[a];u.upload.progress=n,u.upload.total=i.total,u.upload.bytesSent=i.loaded,this.emit("uploadprogress",u,n,i.loaded)}}else{var c=!0;n=100;for(var h=0,d=e;h<d.length;h++){var p=d[h];100===p.upload.progress&&p.upload.bytesSent===p.upload.total||(c=!1),p.upload.progress=n,p.upload.bytesSent=p.upload.total,this.emit("uploadprogress",p,n,p.upload.bytesSent)}if(c)return this.emit("totaluploadprogress",100,this.options.totaluploadprogress,this.getTotalBytes())}}},{key:"_getChunk",value:function(e,t){for(var i=0;i<e.upload.totalChunkCount;i++)if(void 0!==e.upload.chunks[i]&&e.upload.chunks[i].xhr===t)return e.upload.chunks[i]}},{key:"_finishedUploading",value:function(e,t,i){var n;if(e[0].status!==o.CANCELED&&4===t.readyState){if("chunked"===e[0].upload.chunked)return e[0].upload.finishedChunkUpload(this._getChunk(e[0],t),i);if(!(200<=(n=t.status)&&n<300)){this._handleUploadError(e,t);return}if(e[0].upload.chunked){var r=e[0];r.upload.progress=100,r.upload.bytesSent=r.upload.total,this.emit("uploadprogress",r,100,r.upload.total),r.upload.finishedChunkUpload(this._getChunk(r,t))}else{for(var s=0,a=e;s<a.length;s++){(u=a[s]).upload.progress=100,u.upload.bytesSent=u.upload.total,this.emit("uploadprogress",u,100,u.upload.total)}var l=null;try{l=JSON.parse(t.responseText)}catch(e){this._handleUploadError(e,t,"Invalid JSON response from server."),this.emit("error",i,"Invalid JSON response from server.");return}this._finished(e,l,i)}}}else{var u;for(var c=0,h=e;c<h.length;c++)(u=h[c]).status=o.CANCELED}}},{key:"_handleUploadError",value:function(e,t,i){if(e[0].status!==o.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var n=this._getChunk(e[0],t);if(n.retries++<this.options.retryChunksLimit){this._uploadData(e,[n.dataBlock]);return}console.warn("Retried this chunk too often. Giving up.")}for(var r=0,s=e;r<s.length;r++)s[r].status=o.ERROR;i=i||t.responseText||"",this._errorProcessing(e,i)}}},{key:"_finished",value:function(e,t,i){for(var n=0,r=e;n<r.length;n++){var s=r[n];s.status=o.SUCCESS,this.emit("success",s,t,i),this.emit("complete",s)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i];r.status=o.ERROR,this.emit("error",r,t),this.emit("complete",r)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"filesize",value:function(e){var t=0,i="b";if(e>0){for(var n=["tb","gb","mb","kb","b"],r=0;r<n.length;r++){var o=n[r];if(e>=Math.pow(this.options.filesizeBase,4-r)/10){t=e/Math.pow(this.options.filesizeBase,4-r),i=o;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[i])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);var t=[];for(var i=0;i<e.dataTransfer.files.length;i++)t[i]=e.dataTransfer.files[i];if(t.length){var n=e.dataTransfer.items;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){if(null!=__guard__(e,function(e){return e.clipboardData})){this.emit("paste",e);var t=e.clipboardData.items;return t.length?this._addFilesFromItems(t):void 0}}},{key:"handleFiles",value:function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.addFile(n)}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){for(var i=[],n=0,r=e;n<r.length;n++){var o,s=r[n];null!=s.webkitGetAsEntry&&(o=s.webkitGetAsEntry())?o.isFile?i.push(t.addFile(s.getAsFile())):o.isDirectory?i.push(t._addFilesFromDirectory(o,o.name)):i.push(void 0):null!=s.getAsFile&&null!=(o=s.getAsFile())?i.push(t.addFile(o)):i.push(void 0)}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var i=this,n=e.createReader();return n.readEntries(function(n){for(var r=0,o=n;r<o.length;r++){var s=o[r];s.isFile?s.file(function(e){if(!i.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(t,"/").concat(e.name),i.addFile(e)}):s.isDirectory&&i._addFilesFromDirectory(s,"".concat(t,"/").concat(s.name))}},function(e){return console.log(e)})}},{key:"accept",value:function(e,t){if(this.options.maxFilesize&&e.size>1048576*this.options.maxFilesize)return t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize));if(!o.isValidFile(e,this.options.acceptedFiles))return t(this.options.dictInvalidFileType);if(null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles)return t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.options.accept.call(this,e,t)}},{key:"addedfile",value:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=o.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var i=0,n=e.previewElement.querySelectorAll("[data-dz-name]");i<n.length;i++)n[i].textContent=e.name;for(var r=0,s=e.previewElement.querySelectorAll("[data-dz-size]");r<s.length;r++)s[r].innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=o.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));for(var a=function(i){return i.preventDefault(),i.stopPropagation(),e.status===o.UPLOADING?o.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?o.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)},l=0,u=e.previewElement.querySelectorAll("[data-dz-remove]");l<u.length;l++)u[l].addEventListener("click",a)}}},{key:"removedfile",value:function(e){if(null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this.element.classList.remove("dz-started"),0===this.files.length)return this.element.classList.remove("dz-started")}},{key:"thumbnail",value:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var i=0,n=e.previewElement.querySelectorAll("[data-dz-thumbnail]");i<n.length;i++)n[i].alt=e.name,n[i].src=t;return e.previewElement.classList.add("dz-image-preview")}}}]),o}(c);d.initClass=function(){this.prototype.Emitter=c,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesreached","maxfilesexceeded","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1},d.initClass(),d.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},d.extend=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];for(var o=0,s=i;o<s.length;o++){var a=s[o];for(var l in a){var u=a[l];e[l]=u}}return e};var p=d,f=function(e){r(t,e);var n=s(t);function t(){return e(this,t),n.apply(this,arguments)}return i(t,[{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=0,o=this.listeners[e]||[];r<o.length;r++)(0,o[r]).apply(this,i);return this}},{key:"on",value:function(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),this}},{key:"once",value:function(e,t){var i=this;return this.on(e,function n(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];t.apply(i,o),i.off(e,n)})}},{key:"off",value:function(e,t){if(this.listeners[e]){if(t){var i=this.listeners[e].indexOf(t);return i>=0&&this.listeners[e].splice(i,1),this}delete this.listeners[e]}return this}},{key:"listeners",get:function(){return this._listeners=this._listeners||{}},set:function(e){this._listeners=e}}]),t}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});function m(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}return p.version="6.0.0-beta.2",p.options={},p.optionsForElement=function(e){return e.getAttribute("id")?p.options[v(e.getAttribute("id"))]:{}},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new p(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=p:window.Dropzone=p,p.ADDED="added",p.QUEUED="queued",p.ACCEPTED=p.QUEUED,p.UPLOADING="uploading",p.PROCESSING=p.UPLOADING,p.CANCELED="canceled",p.ERROR="error",p.SUCCESS="success",function(e,t){return t?e.classList.add(t):e.classList.remove(t)}});
//# sourceMappingURL=dropzone.min.js.map