# HTTP/2 Server Push Configuration (Optimization #17)
#
# This file contains HTTP/2 Server Push directives
# Merge these into your main .htaccess file
#
# PERFORMANCE IMPACT: 100-200ms faster initial load by pushing critical resources
# before HTML is fully parsed
#
# NOTE: Requires Apache 2.4.17+ with mod_http2 enabled
# Check with: apache2 -M | grep http2

<IfModule mod_http2.c>
    # Enable HTTP/2
    Protocols h2 h2c http/1.1

    # Server Push for critical CSS
    # Adjust paths based on your theme structure
    <FilesMatch "\.html$">
        # Push main CSS file
        Header add Link "</themes/2004/css/steampowered02.css>; rel=preload; as=style"

        # Push logo image
        Header add Link "</themes/2004/images/logo_steam_header.jpg>; rel=preload; as=image"

        # Push critical fonts (if any)
        # Header add Link "</themes/2004/fonts/arial.woff2>; rel=preload; as=font; type=font/woff2; crossorigin"
    </FilesMatch>

    # Alternative: Push for specific pages
    <LocationMatch "^/index\.php">
        # Homepage specific pushes
        Header add Link "</themes/2004/css/main.css>; rel=preload; as=style"
        Header add Link "</themes/2004/js/main.js>; rel=preload; as=script"
    </LocationMatch>

    # Storefront specific pushes
    <LocationMatch "^/index\.php\?area=storefront">
        Header add Link "</themes/2006_v2/storefront/css/storefront.css>; rel=preload; as=style"
    </LocationMatch>
</IfModule>

# Alternative: PHP-based HTTP/2 Push
# Add to your PHP code (before any output):
#
# <?php
# if (function_exists('header_register_callback')) {
#     header('Link: </themes/2004/css/main.css>; rel=preload; as=style');
#     header('Link: </themes/2004/images/logo.jpg>; rel=preload; as=image', false);
# }
# ?>

# Verification:
# Check if HTTP/2 is working:
# curl -I --http2 https://yoursite.com/
#
# Check if push is working:
# Use Chrome DevTools Network tab:
# - Look for "Push" in the "Initiator" column
# - Resources should have "h2" protocol
